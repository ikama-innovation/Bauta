<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:b="http://www.springframework.org/schema/batch"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd

http://www.springframework.org/schema/batch http://www.springframework.org/schema/batch/spring-batch-3.0.xsd">
    <!--<bean id="passThroughItemProcessor2" class="org.springframework.batch.item.support.PassThroughItemProcessor" ></bean>-->
    <b:job id="Job.05.SplitDemo" parent="job_base">
        <b:description>Demonstrates how to use splits to run steps in parallel</b:description>
        <b:step id="sd_one" next="sd_twothreefour" parent="step_base">
            <b:description>Step one description</b:description>
            <b:tasklet>
                <bean class="se.ikama.bauta.batch.tasklet.DummyTasklet">
                    <property name="sleepTimeMs" value="100" />
                    <property name="repeats" value="100" />
                </bean>
            </b:tasklet>
        </b:step>
        <b:split id="sd_twothreefour" next="sd_sixteen" task-executor="multiTaskExecutor">
            <b:flow >
                <b:step parent="step_base" id="sd_two" next="sd_twoandahalf">
                    <b:tasklet>
                        <bean class="se.ikama.bauta.batch.tasklet.DummyTasklet" >
                            <property name="sleepTimeMs" value="100" />
                            <property name="repeats" value="100" />
                        </bean>
                    </b:tasklet>
                </b:step>
                <b:step parent="step_base" id="sd_twoandahalf" >
                    <b:tasklet>
                        <bean class="se.ikama.bauta.batch.tasklet.DummyTasklet" >
                            <property name="sleepTimeMs" value="100" />
                            <property name="repeats" value="100" />
                        </bean>
                    </b:tasklet>
                </b:step>
            </b:flow>
            <b:flow >
                <b:step parent="step_base" id="sd_three_one" next="sd_three_two">
                    <b:tasklet>
                        <bean class="se.ikama.bauta.batch.tasklet.DummyTasklet">
                            <property name="sleepTimeMs" value="100" />
                            <property name="repeats" value="300" />

                        </bean>
                    </b:tasklet>
                </b:step>
                <b:step parent="step_base" id="sd_three_two" next="sd_three_three">
                    <b:tasklet>
                        <bean class="se.ikama.bauta.batch.tasklet.DummyTasklet">
                            <property name="sleepTimeMs" value="100" />
                            <property name="repeats" value="300" />

                        </bean>
                    </b:tasklet>
                </b:step>
                <b:step parent="step_base" id="sd_three_three" >
                    <b:tasklet>
                        <bean class="se.ikama.bauta.batch.tasklet.DummyTasklet">
                            <property name="sleepTimeMs" value="100" />
                            <property name="repeats" value="300" />
                        </bean>
                    </b:tasklet>
                </b:step>

            </b:flow>
            <b:flow >
                <b:step parent="step_base" id="sd_four_one" next="sd_four_two">
                    <b:tasklet>
                        <bean class="se.ikama.bauta.batch.tasklet.DummyTasklet" >
                            <property name="sleepTimeMs" value="100" />
                            <property name="repeats" value="200" />
                        </bean>
                    </b:tasklet>
                </b:step>
                <b:step parent="step_base" id="sd_four_two"  next="sd_four_three">
                    <b:tasklet>
                        <bean class="se.ikama.bauta.batch.tasklet.DummyTasklet" >
                            <property name="sleepTimeMs" value="100" />
                            <property name="repeats" value="200" />
                        </bean>
                    </b:tasklet>
                </b:step>
                <b:step parent="step_base" id="sd_four_three" next="sd_four_four"  >
                    <b:tasklet>
                        <bean class="se.ikama.bauta.batch.tasklet.DummyTasklet" >
                            <property name="sleepTimeMs" value="100" />
                            <property name="repeats" value="200" />
                        </bean>
                    </b:tasklet>
                </b:step>
                <b:step parent="step_base" id="sd_four_four" >
                    <b:tasklet>
                        <bean class="se.ikama.bauta.batch.tasklet.DummyTasklet" >
                            <property name="sleepTimeMs" value="100" />
                            <property name="repeats" value="200" />
                        </bean>
                    </b:tasklet>
                </b:step>
            </b:flow>
            <b:flow >
                <b:step parent="step_base" id="sd_six">
                    <b:tasklet>
                        <bean class="se.ikama.bauta.batch.tasklet.DummyTasklet" >
                            <property name="sleepTimeMs" value="100" />
                            <property name="repeats" value="200" />
                        </bean>
                    </b:tasklet>
                </b:step>
            </b:flow>
            <b:flow >
                <b:step parent="step_base" id="sd_seven">
                    <b:tasklet>
                        <bean class="se.ikama.bauta.batch.tasklet.DummyTasklet" >
                            <property name="sleepTimeMs" value="100" />
                            <property name="repeats" value="200" />
                        </bean>
                    </b:tasklet>
                </b:step>
            </b:flow>
            <b:flow >
                <b:step parent="step_base" id="sd_eight">
                    <b:tasklet>
                        <bean class="se.ikama.bauta.batch.tasklet.DummyTasklet" >
                            <property name="sleepTimeMs" value="100" />
                            <property name="repeats" value="200" />
                        </bean>
                    </b:tasklet>
                </b:step>
            </b:flow>
            <b:flow >
                <b:step parent="step_base" id="sd_nine">
                    <b:tasklet>
                        <bean class="se.ikama.bauta.batch.tasklet.DummyTasklet" >
                            <property name="sleepTimeMs" value="100" />
                            <property name="repeats" value="200" />
                        </bean>
                    </b:tasklet>
                </b:step>
            </b:flow>
            <b:flow >
                <b:step parent="step_base" id="sd_ten">
                    <b:tasklet>
                        <bean class="se.ikama.bauta.batch.tasklet.DummyTasklet" >
                            <property name="sleepTimeMs" value="100" />
                            <property name="repeats" value="200" />
                        </bean>
                    </b:tasklet>
                </b:step>
            </b:flow>
            <b:flow >
                <b:step parent="step_base" id="sd_eleven">
                    <b:tasklet>
                        <bean class="se.ikama.bauta.batch.tasklet.DummyTasklet" >
                            <property name="sleepTimeMs" value="100" />
                            <property name="repeats" value="200" />
                        </bean>
                    </b:tasklet>
                </b:step>
            </b:flow>
            <b:flow >
                <b:step parent="step_base" id="sd_twelve">
                    <b:tasklet>
                        <bean class="se.ikama.bauta.batch.tasklet.DummyTasklet" >
                            <property name="sleepTimeMs" value="100" />
                            <property name="repeats" value="200" />
                        </bean>
                    </b:tasklet>
                </b:step>
            </b:flow>
            <b:flow >
                <b:step parent="step_base" id="sd_thirteen">
                    <b:tasklet>
                        <bean class="se.ikama.bauta.batch.tasklet.DummyTasklet" >
                            <property name="sleepTimeMs" value="100" />
                            <property name="repeats" value="200" />
                        </bean>
                    </b:tasklet>
                </b:step>
            </b:flow>
            <b:flow >
                <b:step parent="step_base" id="sd_fourteen">
                    <b:tasklet>
                        <bean class="se.ikama.bauta.batch.tasklet.DummyTasklet" >
                            <property name="sleepTimeMs" value="100" />
                            <property name="repeats" value="200" />
                        </bean>
                    </b:tasklet>
                </b:step>
            </b:flow>
            <b:flow >
                <b:step parent="step_base" id="sd_fifteen">
                    <b:tasklet>
                        <bean class="se.ikama.bauta.batch.tasklet.DummyTasklet" >
                            <property name="sleepTimeMs" value="100" />
                            <property name="repeats" value="200" />
                        </bean>
                    </b:tasklet>
                </b:step>
            </b:flow>

        </b:split>
        <b:step id="sd_sixteen" parent="step_base">
            <b:tasklet>
                <bean class="se.ikama.bauta.batch.tasklet.DummyTasklet" >
                    <property name="sleepTimeMs" value="100" />
                    <property name="repeats" value="100" />
                </bean>
            </b:tasklet>
        </b:step>

    </b:job>
</beans>
